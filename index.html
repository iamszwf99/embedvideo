<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kaltura Dynamic Embed - Configurable Player</title>

  <!-- Step 1: Load the Kaltura player script -->
  <script src="https://cdnapi.kaltura.com/p/{PARTNER_ID}/sp/{PARTNER_ID}00/embedIframeJs/uiconf_id/{UICONF_ID}/partner_id/{PARTNER_ID}"></script>

  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 2rem auto; }
    label { display: block; margin-top: 1rem; }
    input { width: 100%; padding: 0.5rem; }
    button { margin-top: 1rem; padding: 0.6rem 1.2rem; }
    #player-container { margin-top: 2rem; min-height: 360px; background: #f5f5f5; display: flex; align-items: center; justify-content: center; color: #999; }
  </style>
</head>

<body>
  <h1>Kaltura Dynamic Embed Example</h1>

  <!-- Configuration fields -->
  <label>Partner ID:</label>
  <input id="partnerId" placeholder="e.g. 1234567" />

  <label>UIConf ID:</label>
  <input id="uiconfId" placeholder="e.g. 23448071" />

  <label>Video Entry ID:</label>
  <input id="entryId" placeholder="e.g. 1_abcdxyz" />

  <label>Access Key (KS):</label>
  <input id="ks" placeholder="optional for public videos" />

  <button id="playBtn">Load Video</button>

  <!-- Step 2: Placeholder for the player -->
  <div id="player-container">Player will load here...</div>

  <script>
    document.getElementById('playBtn').addEventListener('click', () => {
      const partnerId = document.getElementById('partnerId').value.trim();
      const uiconfId = document.getElementById('uiconfId').value.trim();
      const entryId = document.getElementById('entryId').value.trim();
      const ks = document.getElementById('ks').value.trim();

      if (!partnerId || !uiconfId || !entryId) {
        alert('Please fill in Partner ID, UIConf ID, and Entry ID.');
        return;
      }

      // Step 3: Clear any previous player
      document.getElementById('player-container').innerHTML = '';

      // Step 4: Dynamically embed the player
      kWidget.embed({
        targetId: 'player-container',
        wid: '_' + partnerId,
        uiconf_id: uiconfId,
        entry_id: entryId,
        flashvars: {
          ks: ks || undefined // pass KS only if provided
        },
        params: {
          wmode: 'transparent'
        }
      });
    });
  </script>
</body>
</html>
